"use strict";
var gulp = require("gulp"),
    jshint = require("gulp-jshint");

gulp.task("default", function() {
  gulp.src(["*.js"])
    .pipe(jshint())
    .pipe(jshint.reporter());
});

var server = require('.')('sleep', 120);
gulp.task('server', server);

gulp.task('test', ['server'], function() {
  console.log('ticking');

  setTimeout(function() {
    server();
  }, 1000);

  setTimeout(function() {
    console.log('stopping');
    server.stop();
  }, 3*1000);
});
